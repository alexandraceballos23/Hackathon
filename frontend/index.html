<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EcoMission: EnergÃ­a en tus manos</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="game-container">
        <!-- Header rediseÃ±ado con mejor estÃ©tica -->
        <header class="game-header">
            <div class="header-content">
                <h1>EcoMission: EnergÃ­a en tus manos</h1>
                <p class="subtitle">Aprende sobre energÃ­a sostenible mientras salvas el planeta</p>
            </div>
            <div class="stats-bar">
                <div class="stat-card">
                    <div class="stat-icon">â­</div>
                    <div class="stat-info">
                        <span class="stat-label">Nivel</span>
                        <span id="level-value" class="stat-value">1</span>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">ğŸŒ¿</div>
                    <div class="stat-info">
                        <span class="stat-label">Eco Puntos</span>
                        <span id="eco-points-value" class="stat-value">0</span>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">ğŸ¯</div>
                    <div class="stat-info">
                        <span class="stat-label">Progreso</span>
                        <span id="missions-completed-value" class="stat-value">0/5</span>
                    </div>
                </div>
            </div>
        </header>

        <!-- EcoBot con animaciÃ³n mejorada -->
        <div class="ecobot-container">
            <div class="ecobot-avatar">
                <div class="robot-body">ğŸ¤–</div>
                <div class="robot-antenna"></div>
            </div>
            <div class="ecobot-bubble">
                <p id="ecobot-message">Cargando...</p>
            </div>
        </div>

        <!-- Layout mejorado con mapa mÃ¡s grande -->
        <div class="game-main">
            <div class="map-section">
                <!-- Mapa mÃ¡s grande y responsive -->
                <div class="map-container">
                    <h2 class="section-title">Mapa Interactivo</h2>
                    <canvas id="game-canvas"></canvas>
                    <div class="map-legend">
                        <span class="legend-item"><span class="legend-dot unlocked"></span> Disponible</span>
                        <span class="legend-item"><span class="legend-dot completed"></span> Completada</span>
                        <span class="legend-item"><span class="legend-dot locked"></span> Bloqueada</span>
                    </div>
                </div>

                <!-- Panel de premios y quiz debajo del mapa -->
                <div class="rewards-quiz-section">
                    <div class="rewards-panel">
                        <h3>ğŸ† Premios Desbloqueados</h3>
                        <div id="rewards-list" class="rewards-list">
                            <p class="empty-state">Completa misiones para desbloquear premios</p>
                        </div>
                    </div>
                    
                    <div class="quiz-panel">
                        <h3>â“ Quiz RÃ¡pido</h3>
                        <div id="quiz-content" class="quiz-content">
                            <p class="quiz-question" id="quiz-question">Â¿QuÃ© fuente de energÃ­a es renovable?</p>
                            <div class="quiz-options">
                                <button class="quiz-option" data-answer="correct">EnergÃ­a Solar</button>
                                <button class="quiz-option" data-answer="wrong">CarbÃ³n</button>
                                <button class="quiz-option" data-answer="wrong">PetrÃ³leo</button>
                                <button class="quiz-option" data-answer="wrong">Gas Natural</button>
                            </div>
                            <p id="quiz-feedback" class="quiz-feedback"></p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Panel lateral rediseÃ±ado -->
            <div class="sidebar">
                <div class="zones-panel">
                    <h2>Zonas del Mapa</h2>
                    <div id="zones-list" class="zones-list"></div>
                </div>
                
                <div class="controls-panel">
                    <button id="reset-btn" class="btn btn-danger">Reiniciar Juego</button>
                </div>
            </div>
        </div>

        <!-- Modal de misiÃ³n mejorado con mensajes de inicio -->
        <div id="mission-modal" class="modal hidden">
            <div class="modal-overlay"></div>
            <div class="modal-content">
                <div class="mission-header">
                    <h2 id="mission-title">MisiÃ³n</h2>
                    <button id="close-mission-btn" class="close-btn">âœ•</button>
                </div>
                
                <div class="mission-intro" id="mission-intro">
                    <div class="ecobot-intro">
                        <span class="intro-robot">ğŸ¤–</span>
                        <p id="mission-intro-text">Mensaje de inicio...</p>
                    </div>
                    <button id="start-mission-btn" class="btn btn-primary">Comenzar MisiÃ³n</button>
                </div>
                
                <div class="mission-gameplay hidden" id="mission-gameplay">
                    <p id="mission-description" class="mission-description">DescripciÃ³n de la misiÃ³n</p>
                    
                    <div class="mission-stats">
                        <div class="mission-stat">
                            <span class="stat-icon">â±ï¸</span>
                            <span>Tiempo: <strong id="mission-timer">30</strong>s</span>
                        </div>
                        <div class="mission-stat">
                            <span class="stat-icon">ğŸ“Š</span>
                            <span>Progreso: <strong id="mission-progress">0</strong>/<strong id="mission-target">5</strong></span>
                        </div>
                    </div>
                    
                    <div id="mission-game-area" class="mission-game-area"></div>
                </div>
            </div>
        </div>

        <!-- Modal de victoria mejorado -->
        <div id="victory-modal" class="modal hidden">
            <div class="modal-overlay"></div>
            <div class="modal-content victory-content">
                <div class="victory-animation">
                    <div class="trophy">ğŸ†</div>
                    <div class="confetti"></div>
                </div>
                <h2>Â¡Felicidades, GuardiÃ¡n del Planeta!</h2>
                <p class="victory-subtitle">Has completado todas las misiones de EcoMission</p>
                
                <div class="victory-stats">
                    <div class="victory-stat">
                        <span class="stat-icon">â­</span>
                        <span class="stat-label">Nivel Final</span>
                        <span id="final-level" class="stat-value">1</span>
                    </div>
                    <div class="victory-stat">
                        <span class="stat-icon">ğŸŒ¿</span>
                        <span class="stat-label">Eco Puntos</span>
                        <span id="final-points" class="stat-value">0</span>
                    </div>
                    <div class="victory-stat">
                        <span class="stat-icon">ğŸ¯</span>
                        <span class="stat-label">Misiones</span>
                        <span id="final-missions" class="stat-value">5</span>
                    </div>
                </div>
                
                <div class="victory-message">
                    <h3>Lo que has aprendido:</h3>
                    <ul>
                        <li>ğŸ’¡ La eficiencia energÃ©tica comienza en casa</li>
                        <li>â˜€ï¸ Las energÃ­as renovables son el futuro</li>
                        <li>ğŸ­ La industria puede ser sostenible</li>
                        <li>ğŸ’§ El agua es un recurso vital que debemos cuidar</li>
                        <li>ğŸŒ† Las ciudades verdes son posibles</li>
                    </ul>
                    <p class="final-message">Cada acciÃ³n cuenta. Â¡Sigue cuidando tu mundo!</p>
                </div>
                
                <button id="play-again-btn" class="btn btn-primary btn-large">Jugar de Nuevo</button>
            </div>
        </div>

        <!-- Modal de completar misiÃ³n -->
        <div id="completion-modal" class="modal hidden">
            <div class="modal-overlay"></div>
            <div class="modal-content completion-content">
                <div class="completion-icon">âœ…</div>
                <h2>Â¡MisiÃ³n Completada!</h2>
                <p id="completion-message" class="completion-message"></p>
                <div class="reward-display">
                    <span class="reward-icon">ğŸŒ¿</span>
                    <span id="reward-points" class="reward-points">+100</span>
                    <span class="reward-label">Eco Puntos</span>
                </div>
                <button id="continue-btn" class="btn btn-primary">Continuar</button>
            </div>
        </div>
    </div>

    <script src="game.js"></script>
</body>
</html>
